<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - Dr. Care Animal Bite Center Naic</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="/static/css/user_responsive.css">
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            transition: margin-left 0.3s ease;
        }
        .main-bg {
            background: url('/static/icons/background.png') center center / cover no-repeat fixed;
            background-blend-mode: overlay;
            background-color: rgba(255, 255, 255, 0.9);
        }
        .sidebar {
            height: 100%;
            width: 280px; /* Set a fixed width */
            position: fixed;
            z-index: 1000;
            top: 0;
            left: -280px; /* Start off-screen */
            background-color: white;
            overflow-x: hidden;
            transition: left 0.3s ease-in-out;
            padding-top: 20px;
            border-right: 2px solid #A52A2A;
        }

        body.sidebar-open .sidebar {
            left: 0; /* Slide in */
        }
        .sidebar .profile-section {
            text-align: center;
            padding: 20px;
            border-bottom: 1px solid #ddd;
        }
        .sidebar .profile-initial {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background-color: #A52A2A;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 36px;
            font-weight: bold;
            margin: 0 auto 15px;
            text-transform: uppercase;
        }
        .sidebar a {
            padding: 15px 25px;
            text-decoration: none;
            font-size: 1.1rem;
            color: #333;
            display: flex;
            align-items: center;
            transition: 0.3s;
        }
        .sidebar a:hover {
            background-color: #f1f1f1;
            color: #A52A2A;
        }
        .sidebar a .fa-icon {
            width: 30px;
            margin-right: 15px;
            text-align: center;
        }
        /* .closebtn removed (no longer used) */
        .menu-icon {
            cursor: pointer;
            font-size: 24px;
            color: white;
            margin-right: 15px;
        }
        .main-content {
            transition: margin-left 0.3s ease-in-out;
        }

        body.sidebar-open .main-content {
            margin-left: 280px;
        }

        /* Desktop: sidebar always open */
        @media (min-width: 769px) {
            .sidebar {
                left: 0 !important; /* Always visible on desktop */
            }
            body .main-content {
                margin-left: 280px; /* Always shifted on desktop */
            }
            .menu-icon {
                display: none; /* Hide hamburger on desktop */
            }
        }

        /* Mobile: sidebar slides in/out */
        @media (max-width: 768px) {
            body:not(.sidebar-open) .main-content {
                margin-left: 0; /* No margin when closed on mobile */
            }
        }
    </style>
</head>
<body class="bg-gray-100">
    <!-- Sidebar -->
    {% include '_user_sidebar.html' %}

    <div id="main" class="main-content">
        <!-- Header -->
        <header class="bg-red-800 text-white shadow-md sticky top-0 z-50">
            <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
                <div class="flex items-center">
                    <div class="menu-icon" onclick="toggleNav()">
                        <i class="fas fa-bars text-2xl"></i>
                    </div>
                    <a href="{{ url_for('home') }}" class="flex items-center space-x-3 ml-2">
                        <div class="h-12 w-auto flex items-center">
                            <img src="/static/icons/Logo 1.png" alt="Dr. Care Animal Bite Center Naic Logo" class="h-full w-auto">
                        </div>
                        <span class="text-xl font-semibold">Dr. Care Animal Bite Center Naic</span>
                    </a>
                </div>
            </nav>
        </header>

    <!-- Main Content -->
    <main class="main-bg min-h-screen flex items-center justify-center p-6" style="min-height: calc(100vh - 76px);">
    <div class="home-card-grid grid grid-cols-1 md:grid-cols-2 gap-10 w-full max-w-6xl mt-7">
            <!-- Card 1: Book An Appointment -->
            {# Prefer Flask-Login's current_user, but fall back to session keys if needed #}
            <a href="{% if (current_user is defined and current_user.is_authenticated) or (session.user_username is defined and session.user_username) or (session.user_email is defined and session.user_email) %}{{ url_for('book_appointment') }}{% else %}{{ url_for('login') }}{% endif %}" class="home-card bg-white p-10 rounded-xl shadow-xl border-2 border-red-300 flex items-center space-x-10 hover:shadow-2xl hover:scale-[1.02] transition-all duration-300 transform hover:border-red-400">
                <div class="icon-container p-4 rounded-lg">
                    <img src="/static/icons/booking 1.png" alt="Calendar Icon" class="w-24 h-24">
                </div>
                <span class="text-4xl font-bold text-gray-800">Book An Appointment</span>
            </a>

            <!-- Card 2: Bite Categories -->
            <a href="{{ url_for('bite_categories') }}" class="home-card bg-white p-10 rounded-xl shadow-xl border-2 border-red-300 flex items-center space-x-10 hover:shadow-2xl hover:scale-[1.02] transition-all duration-300 transform hover:border-red-400">
                <div class="icon-container p-4 rounded-lg">
                    <img src="/static/icons/Group 43.png" alt="Categories Icon" class="w-24 h-24">
                </div>
                <span class="text-4xl font-bold text-gray-800">Bite Categories</span>
            </a>

            <!-- Card 3: Animal bite first aid -->
            <a href="{{ url_for('animal_bite_first_aid') }}" class="home-card bg-white p-10 rounded-xl shadow-xl border-2 border-red-300 flex items-center space-x-10 hover:shadow-2xl hover:scale-[1.02] transition-all duration-300 transform hover:border-red-400">
                <div class="icon-container p-4 rounded-lg">
                    <img src="/static/icons/reminder 1.png" alt="First Aid Icon" class="w-24 h-24">
                </div>
                <span class="text-4xl font-bold text-gray-800">Animal Bite First Aid</span>
            </a>

            <!-- Card 4: After-vaccine reminders -->
            <a href="{{ url_for('after_care_reminder') }}" class="home-card bg-white p-10 rounded-xl shadow-xl border-2 border-red-300 flex items-center space-x-10 hover:shadow-2xl hover:scale-[1.02] transition-all duration-300 transform hover:border-red-400">
                <div class="icon-container p-4 rounded-lg">
                    <img src="/static/icons/reminder (1) 1.png" alt="Reminder Icon" class="w-24 h-24">
                </div>
                <span class="text-4xl font-bold text-gray-800">After-Vaccine Reminders</span>
            </a>

            <!-- Virtual Vaccination Card link moved to sidebar -->
        </div>
    </main>

    <script>
        function navigateTo(url) {
            // Only close nav on mobile
            if (window.innerWidth <= 768) {
                closeNav();
            }
            window.location.href = url;
            return false;
        }
        
        function toggleNav() {
            // Only toggle on mobile
            if (window.innerWidth <= 768) {
                document.body.classList.toggle('sidebar-open');
            }
        }

        function closeNav() {
            // Only close on mobile
            if (window.innerWidth <= 768) {
                document.body.classList.remove('sidebar-open');
            }
        }

        // Close sidebar when clicking outside of it (mobile only)
        document.getElementById('main').addEventListener('click', function(event) {
            if (window.innerWidth <= 768 && 
                document.body.classList.contains('sidebar-open') && 
                !event.target.closest('.sidebar') && 
                !event.target.closest('.menu-icon')) {
                closeNav();
            }
        });
        
        // Prevent clicks inside sidebar from closing it
        document.querySelector('.sidebar').addEventListener('click', function(event) {
            event.stopPropagation();
            
            // If a link was clicked on mobile, close the sidebar after a short delay
            if (window.innerWidth <= 768 && (event.target.tagName === 'A' || event.target.closest('a'))) {
                setTimeout(closeNav, 300);
            }
        });

        // Handle window resize - keep sidebar open on desktop, allow close on mobile
        let resizeTimer;
        window.addEventListener('resize', function() {
            clearTimeout(resizeTimer);
            resizeTimer = setTimeout(function() {
                if (window.innerWidth > 768) {
                    // Desktop: ensure sidebar is always visible
                    document.body.classList.add('sidebar-open');
                } else {
                    // Mobile: allow it to be closed (don't force open)
                    // Keep current state
                }
            }, 250);
        });

        // Initialize: open sidebar on desktop, closed on mobile
        if (window.innerWidth > 768) {
            document.body.classList.add('sidebar-open');
        }
    </script>

</body>
</html>
